# Email Builder - Cursor Rules

Tento soubor obsahuje pravidla a tipy pro pr√°ci s Email Builderem v Cursoru.

## üìß HTML Email Best Practices

### Emoji v emailech

**Probl√©m:** Emoji se zalom√≠ na nov√Ω ≈ô√°dek, odtrhne se od textu, nebo se teƒçka objev√≠ na dal≈°√≠m ≈ô√°dku.

**≈òe≈°en√≠:** Zabalit emoji do `<span>` s `inline-block` stylem:

```html
<span style="display:inline-block; vertical-align:middle; line-height:1; font-size:1.1em;">üéÑ</span>
```

**Kl√≠ƒçov√© vlastnosti:**
- `display:inline-block` ‚Äî emoji se chov√° jako blok a nezalom√≠ se od p≈ôedchoz√≠ho textu
- `vertical-align:middle` ‚Äî vertik√°lnƒõ zarovnan√© na st≈ôed ≈ô√°dku
- `line-height:1` ‚Äî minim√°ln√≠ v√Ω≈°ka ≈ô√°dku, aby nezvƒõt≈°ovalo mezery
- `font-size:1.1em` ‚Äî trochu vƒõt≈°√≠ emoji pro lep≈°√≠ viditelnost

**D≈Øle≈æit√©:** Teƒçka/text mus√≠ b√Ωt P≈òED span, ne uvnit≈ô!

```html
<!-- ‚úÖ Spr√°vnƒõ -->
<p>Tƒõ≈°√≠me se na v√°s! <span style="display:inline-block; vertical-align:middle; line-height:1; font-size:1.1em;">üöÄ</span></p>

<!-- ‚ùå ≈†patnƒõ -->
<p>Tƒõ≈°√≠me se na v√°s üöÄ!</p>
```

### Mobiln√≠ zobrazen√≠

**Probl√©m:** Text je na mobilu p≈ô√≠li≈° mal√Ω.

**≈òe≈°en√≠:** P≈ôidat viewport meta tag a media queries:

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
  @media screen and (max-width: 600px) {
    .wrapper { width: 100% !important; }
    .mobile-full { width: 100% !important; display: block !important; }
  }
</style>
```

### Dark Mode Support

**Probl√©m:** Email klienti automaticky invertuj√≠ barvy v dark mode.

**≈òe≈°en√≠:** Force light mode pomoc√≠ meta tag≈Ø a CSS:

```html
<meta name="color-scheme" content="light only">
<meta name="supported-color-schemes" content="light only">

<style>
  :root {
    color-scheme: light only !important;
  }
  body {
    color-scheme: light only !important;
    background-color: #f3f4ff !important;
    color: #020617 !important;
  }
</style>
```

### Outlook kompatibilita

**Probl√©m:** Outlook pou≈æ√≠v√° Word rendering engine, kter√Ω nepodporuje modern√≠ CSS.

**≈òe≈°en√≠:**
- Pou≈æ√≠vat tabulky m√≠sto div≈Ø
- VML pro tlaƒç√≠tka (v:roundrect)
- Inline styly m√≠sto CSS t≈ô√≠d
- Data atributy pro dark mode: `data-ogsc`, `data-ogsb`

### Fonty

**Brandov√© fonty:**
- Hlavn√≠ text: `'Inter', Arial, sans-serif`
- Nadpisy: `'Lora', Georgia, serif`

**Import:**
```html
@import url('https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Inter:wght@400;500;600;700&display=swap');
```

### Barvy

**Brandov√© barvy:**
- Text: `#020617`
- Pozad√≠: `#ffffff`
- Background: `#f3f4ff`
- CTA buttony: `#000000` (pozad√≠), `#ffffff` (text)
- Linky: `#FF5AFF` nebo `#1C58FF`
- Gradient: Pink `#ff7ad9`, Blue `#6a9bff`, Orange `#ffb86b`

### Spacing

- Mezi sekcemi: `20px` nebo `32px`
- Padding box≈Ø: `28px 24px` (hlavn√≠), `16px 18px` (bubliny)
- Padding containeru: `32px` nebo `40px`

### Orphans a Widows

V≈°echny texty by mƒõly m√≠t `orphans: 2; widows: 2;` pro lep≈°√≠ ƒçitelnost:

```html
<p style="orphans: 2; widows: 2;">Text...</p>
```

## üé® Email Builder Komponenty

### Dostupn√© bloky

1. **Greeting** - Osloven√≠ s personalizac√≠ `{{ contact.OSLOVENI }}`
2. **Hero Image** - Hero obr√°zek naho≈ôe
3. **Text Section** - Textov√° sekce s voliteln√Ωm nadpisem
4. **Gradient Box** - Box s gradientem pro d≈Øle≈æit√© informace
5. **Event Box** - Box pro akce s split layoutem (gradient vlevo/vpravo)
6. **Use Case Bubble** - Bublina pro use case (zarovn√°n√≠ vlevo/vpravo)
7. **Video Section** - Sekce s YouTube videem
8. **CTA Button** - Call-to-action tlaƒç√≠tko (gradient nebo solid)
9. **Image** - Samostatn√Ω obr√°zek
10. **Divider** - Oddƒõlovaƒç
11. **Spacer** - Vertik√°ln√≠ mezera
12. **Footer** - Footer s logem a informacemi

### Pou≈æit√≠ komponent

V≈°echny komponenty jsou v `src/components/editor/blocks/` a automaticky se renderuj√≠ v editoru.

### Generov√°n√≠ HTML

HTML se generuje pomoc√≠ `generateEmailHTML()` funkce v `src/lib/generate-html.ts`.

Funkce automaticky:
- Zabal√≠ emoji do spr√°vn√Ωch span tag≈Ø
- P≈ôid√° dark mode support
- P≈ôid√° Outlook kompatibilitu
- Pou≈æije spr√°vn√© fonty a barvy

### Upload obr√°zk≈Ø

Obr√°zky se nahr√°vaj√≠ do `/public/uploads/` pomoc√≠ API route `/api/upload`.

Upload funkce:
- Validuje typ souboru (pouze obr√°zky)
- Validuje velikost (max 5MB)
- Generuje unik√°tn√≠ n√°zev souboru
- Vrac√≠ relativn√≠ URL (`/uploads/filename.jpg`)

Pro Brevo kompatibilitu je pot≈ôeba p≈ôev√©st relativn√≠ URL na absolutn√≠ URL p≈ôed odesl√°n√≠m.

### Designy a ≈°ablony

≈†ablony jsou v `src/lib/designs/index.ts`:

- **newsletterTemplate** - Newsletter design s event boxy
- **b2bTemplate** - B2B email s use case bublinami

≈†ablony lze naƒç√≠st pomoc√≠ `getTemplate(id)` funkce.

### Barevn√© varianty

V `src/themes/index.ts` jsou definovan√© barevn√© varianty:

- `light-pink-blue` - Svƒõtl√Ω design s r≈Ø≈æovo-modr√Ωm gradientem
- `light-sunset` - Svƒõtl√Ω design s r≈Ø≈æovo-modro-oran≈æov√Ωm gradientem
- `dark-pink-blue` - Tmav√Ω design (zat√≠m nepodporov√°no)
- `dark-sunset` - Tmav√Ω design (zat√≠m nepodporov√°no)

## üí° Tipy pro pr√°ci s builderem

1. **Drag & Drop**: Bloky lze p≈ôetahovat z palety a p≈ôesouvat v emailu
2. **Duplikov√°n√≠**: Kliknƒõte na blok a pou≈æijte tlaƒç√≠tko duplikovat
3. **Maz√°n√≠**: Kliknƒõte na blok a pou≈æijte tlaƒç√≠tko smazat
4. **Nastaven√≠**: Kliknƒõte na blok pro zobrazen√≠ nastaven√≠ v prav√©m panelu
5. **Export**: Pou≈æijte tlaƒç√≠tko "St√°hnout HTML" nebo "Kop√≠rovat HTML"

## üöÄ P≈ô√≠klady pou≈æit√≠

### Vytvo≈ôen√≠ nov√©ho emailu

1. Otev≈ôete editor na `/editor`
2. P≈ôidejte bloky z lev√©ho panelu
3. Upravte obsah v prav√©m panelu
4. Exportujte HTML

### Pou≈æit√≠ ≈°ablony

```typescript
import { getTemplate } from '@/lib/designs';
import { useEmailState } from '@/lib/email-state';

const template = getTemplate('newsletter');
const { loadState } = useEmailState();
loadState(template.state);
```

### P≈ôid√°n√≠ nov√©ho bloku

1. Vytvo≈ôte interface v `email-state.ts`
2. P≈ôidejte do `BlockType` union
3. Vytvo≈ôte komponentu v `blocks/`
4. P≈ôidejte generov√°n√≠ HTML v `generate-html.ts`
5. P≈ôidejte nastaven√≠ v `BlockSettings.tsx`

## üìù Pozn√°mky

- V≈°echny emoji jsou automaticky zabalen√© do span tag≈Ø p≈ôi generov√°n√≠ HTML
- Dark mode je vynucen√Ω na light mode pro konzistentn√≠ zobrazen√≠
- Outlook kompatibilita je zaji≈°tƒõna pomoc√≠ VML a data atribut≈Ø
- Mobiln√≠ zobrazen√≠ je responzivn√≠ d√≠ky media queries

